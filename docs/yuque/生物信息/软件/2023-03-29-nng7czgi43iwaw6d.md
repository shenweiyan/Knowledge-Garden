---
title: BLAT å’Œ UCSC ç³»åˆ—å·¥å…·æºç ç¼–è¯‘å®‰è£…
urlname: 2023-03-29-nng7czgi43iwaw6d
author: ç« é±¼çŒ«å…ˆç”Ÿ
date: 2023-03-29
updated: "2023-03-29 14:14:39"
---

åœ¨ <https://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/> è¿™ä¸ªé¡µé¢ä¸­ï¼ŒUCSC å®˜æ–¹å·²ç»æä¾›äº†å¾ˆå¤šå·²ç»ç¼–è¯‘å¥½å¯ä»¥ç›´æ¥åœ¨ Unix/Linux ç›´æ¥ä½¿ç”¨çš„ UCSC Genome Browser çš„ Utils å·¥å…·é›†ã€‚
ä½†å¯¹äºè€æ—§çš„æœåŠ¡å™¨ï¼Œå¦‚ RHEL 6.Xï¼Œè¿™äº›ç¼–è¯‘å¥½çš„å·¥å…·å¯èƒ½ä¼šå‡ºç°æŠ¥é”™ï¼š
![image.png](https://shub.weiyan.tech/yuque/elog-cookbook-img/Fu-E8bF-CKs3bw5pUMqihPL8nOEI.png)
å› æ­¤ï¼Œå¯ä»¥é€šè¿‡æºç ç¼–è¯‘å®‰è£…çš„æ–¹æ³•æ¥è§£å†³ã€‚

## æºç æ–‡ä»¶

UCSC Genome Browser å·¥å…·é›†å¯¹åº”çš„æºç æ”¾åœ¨ <https://hgdownload.cse.ucsc.edu/admin/>ï¼Œå¯¹åº”äº jksrc.vNNN.zip æ–‡ä»¶ã€‚
![image.png](https://shub.weiyan.tech/yuque/elog-cookbook-img/FoPLAPImyAFTqOXjsyHVUXtGvSuO.png)

## ç¼–è¯‘å®‰è£…

ç¼–è¯‘å®‰è£…å¯ä»¥å‚è€ƒ <https://github.com/ucscGenomeBrowser/kent/blob/master/README> çš„è¯´æ˜ã€‚
ä¸ªäººåœ¨ RHEL 6.5 x86_64 æœåŠ¡å™¨ä¸­ç¼–è¯‘ jksrc.v400ï¼Œæ‰§è¡Œ`make utils`ä¸€æ­¥æ— æ³•æœ€ç»ˆæˆåŠŸ(é”™è¯¯å¦‚ä¸‹)ï¼Œä½†è‡³å°‘èƒ½åœ¨å®‰è£…ç›®å½•ä¸‹å¾—åˆ°ä¸€å †åŒ…æ‹¬ blat/twoBitToFa/bigWigToWig åœ¨å†…çš„å¯æ‰§è¡Œç¨‹åº(è™½ç„¶ä¸æ˜¯å®Œå…¨æˆåŠŸï¼Œä½†è‡³å°‘å¾—åˆ°æƒ³è¦çš„ç¨‹åº)ã€‚

```bash
$ unzip jksrc.v400.zip
$ cd kent/src
$ vi inc/common.mk  ##è®¾ç½® BINDIR = /Bioinfo/Pipeline/SoftWare/UCSCSuite
$ echo $MACHTYPE
x86_64-redhat-linux-gnu
$ export MACHTYPE=x86_64
x86_64
$ make
......
../../lib/x86_64/jkweb.a(windowsToAscii.o): In function `windowsToAscii':
/Bioinfo/SRC/build/kent/src/lib/windowsToAscii.c:13: undefined reference to `libiconv_open'
/Bioinfo/SRC/build/kent/src/lib/windowsToAscii.c:19: undefined reference to `libiconv'
collect2: ld returned 1 exit status
make[2]: *** [/Bioinfo/Pipeline/SoftWare/UCSCSuite/pslLiftSubrangeBlat] Error 1
make[2]: Leaving directory `/Bioinfo/SRC/build/kent/src/utils/pslLiftSubrangeBlat'
make[1]: *** [pslLiftSubrangeBlat.all] Error 2
make[1]: Leaving directory `/Bioinfo/SRC/build/kent/src/utils'
make: *** [utils] Error 2
```

- Software Requirements å‚è€ƒï¼š[Manual installation of the UCSC Genome Browser on a Unix server](https://genome.ucsc.edu/goldenpath/help/mirrorManual.html)

## BLAT å®‰è£…

> ğŸ“¢ å‚è€ƒï¼šã€Š[Installing BLAT and BLAST](https://nix-bio.blogspot.com/2013/10/installing-blat-and-blast.html)ã€‹

It's been a while since I last installed BLAT and when I went to the download directory at UCSC: <http://users.soe.ucsc.edu/~kent/src/> I found that the latest blast is now version 35 and that the code to download was: [blatSrc35.zip](http://users.soe.ucsc.edu/~kent/src/blatSrc35.zip). However, you can also get pre-compiled binaries at: <http://hgdownload.cse.ucsc.edu/admin/exe/> and that there was a linux x86_64 executable for my architecture available at: <http://hgdownload.cse.ucsc.edu/admin/exe/linux.x86_64/blat/>. Though YYMV, BLAT can be a little bit of a tricky beast to get going, so I decided to download the source code and compile that.

I will be compiling this code as 'root' as a system tool in`/usr/local/src`, so do not scream at me for that.

First I created an`/usr/local/src/blat`directory and I copied the blatSrc35.zip file into that.

Next I used

```bash
unzip blatSrc35.zip
```

to unpack the archive. This gives a directory blatSrc now move into that directory.

```bash
#cd blatSrc
```

before you begin read the README file that comes with the source code.

One thing about building blat is that you need to set the MACHTYPE variable so that the BLAT sources know what type of machine you are compiling the software on.

on most \*nix machines, typing

```bash
echo $MACHTYPE
```

will return the machine architecture type.

On my CentOS 6 based system this gave:

```bash
x86_64-redhat-linux-gnu
```

However, what BLAT requires is the **'short value'** (ie the first part of the MACHTYPE). To correct this, in the bash shell type (change this to the correct MACHTYPE for your system)

```bash
MACHTYPE=x86_64
export MACHTYPE
```

now running the command:

```bash
echo $MACHTYPE
```

should give the correct short form of the MACHTYPE:

```bash
x86_64
```

now create the directory`lib/$MACHTYPE`in the source tree. ie:

```bash
mkdir lib/$MACHTYPE
```

For my machine, `lib/x86_64`already existed, so I did not have to do this, but this is not the case for all architectures.

The BLAT code assumes that you are compiling BLAT as a non-privileged (ie non-root) user. As a result, you must create the directory for the executables to go into:

```bash
mkdir ~/bin/$MACHTYPE
```

If you are installing as a normal user, edit your`.bashrc`to add the following (change the x86_64 to be your MACHTYPE):

```bash
export PATH=~/bin/x86_64::$PATH
```

For me, though, this was not good enough. I wanted the executables in`/usr/local/bin`where all my other code goes. As a result I did some hackery...

There is a master make template in the inc directory called common.mk and I edited this file with the command:

```bash
vi inc/common.mk
```

I replaced the line

```bash
BINDIR=${HOME}/bin/${MACHTYPE}
```

with

```bash
BINDIR=/usr/local/bin
```

saved and quit (as this is in my path, I do not need to do anything else)

All the preparation is now done and you can create the blat executables by going into the toplevel of the blat source tree (for me it was /usr/local/src/blat/blatSrc, but change to wherever you unpacked blat into).

Now simply run the command:

```bash
make
```

to compile the code.

Blat installed cleanly and the executables were all neatly placed in`/usr/local/bin/x86_64`, just like I wanted.

now simply running the command:

```bash
blat
```

on the command line gives me information on blat and sample usage.

Blat is installed and it's installed properly in my system code tree!!!
